# Barcode Scanner для CipherLab RK26

Минималистичное Android приложение для работы со сканером штрихкодов на терминале CipherLab RK26.

## Особенности

- **Автоматический фокус**: Поле ввода автоматически получает фокус при запуске приложения
- **Интеграция со сканером**: Поддержка встроенного лазерного сканера CipherLab RK26
- **Минималистичный интерфейс**: Простой и понятный UI, оптимизированный для терминала
- **Автоматическая обработка**: Результаты сканирования автоматически попадают в поле ввода
- **Статус сканера**: Индикатор состояния встроенного сканера
- **Полноэкранный режим**: Скрытие системных панелей для работы на терминале

## Функциональность

### Основные элементы интерфейса:

1. **Поле ввода штрихкода** - автоматически получает фокус при запуске
2. **Кнопка "Отправить"** - активируется при наличии текста в поле
3. **Кнопка "Сканировать"** - программная активация сканера
4. **Индикатор статуса** - показывает состояние сканера
5. **История сканирования** - отображение последнего отсканированного штрихкода

### Работа со сканером:

- **Физическое сканирование**: Используйте боковые кнопки терминала для активации лазера
- **Программное сканирование**: Нажмите кнопку "Сканировать" в приложении
- **Автоматический ввод**: Результаты сканирования автоматически попадают в поле ввода
- **BroadcastReceiver**: Приложение слушает системные события для получения результатов

### Процесс работы:

1. Запустите приложение - поле ввода автоматически получит фокус
2. Отсканируйте штрихкод или введите его вручную
3. Кнопка "Отправить" станет активной
4. Нажмите "Отправить" - появится уведомление с результатом
5. Поле ввода очистится и готово к следующему сканированию

## Технические детали

### Архитектура:

- **Kotlin** с Jetpack Compose
- **Material Design 3** для современного UI
- **BroadcastReceiver** для получения результатов сканирования
- **State Management** через собственный класс AppState

### Интеграция с CipherLab RK26:

- Поддержка системных событий CipherLab
- Автоматическое определение доступности сканера
- Обработка различных форматов broadcast'ов
- Работа с предустановленными приложениями терминала

### Файловая структура:

```
app/src/main/java/com/example/myapplication/
├── MainActivity.kt              # Основная активность
├── AppState.kt                  # Управление состоянием
├── CipherLabScanner.kt          # Работа со сканером
├── ScannerBroadcastReceiver.kt  # Получение результатов
└── ui/theme/                    # Тема приложения
```

## Установка и настройка

### Требования:

- Android 12+ (API 31+)
- CipherLab RK26 терминал
- Установленные драйверы CipherLab

### Разрешения:

Приложение требует следующие разрешения:

- `RECEIVE_BOOT_COMPLETED` - для автозапуска
- `WAKE_LOCK` - для поддержания активности
- `VIBRATE` - для тактильной обратной связи
- `com.cipherlab.scanner.permission.SCANNER` - доступ к сканеру
- `com.cipherlab.barcode.permission.BARCODE` - работа с штрихкодами

### Сборка:

```bash
./gradlew assembleDebug
```

### Установка на терминал:

```bash
adb install app-debug.apk
```

## Настройка CipherLab RK26

### Проверка драйверов:

1. Убедитесь, что установлены драйверы CipherLab
2. Проверьте наличие системных приложений:
   - `com.cipherlab.scanner`
   - `com.cipherlab.barcode`
   - `com.cipherlab.reader`

### Настройка сканера:

1. Откройте приложение "Reader Config"
2. Настройте параметры сканирования
3. Включите автоматический ввод в активное поле

### Тестирование:

1. Запустите приложение
2. Проверьте статус сканера в интерфейсе
3. Протестируйте физическое и программное сканирование

## Возможные проблемы

### Сканер не работает:

- Проверьте установку драйверов CipherLab
- Убедитесь в наличии системных разрешений
- Перезагрузите терминал

### Результаты не попадают в поле:

- Проверьте настройки "Reader Config"
- Убедитесь в правильности broadcast'ов
- Проверьте логи приложения

### Интерфейс не отображается корректно:

- Проверьте настройки полноэкранного режима
- Убедитесь в совместимости с версией Android
- Проверьте настройки Material Design

## Дополнительные возможности

### Расширение функциональности:

- Добавление истории сканирования
- Экспорт данных
- Настройка уведомлений
- Интеграция с внешними API
- Сохранение в базу данных

### Оптимизация для терминала:

- Отключение неиспользуемых функций
- Минимизация потребления ресурсов
- Автозапуск при включении терминала
- Быстрый доступ к сканированию

## Поддержка

При возникновении проблем:

1. Проверьте логи приложения через `adb logcat`
2. Убедитесь в корректности настроек терминала
3. Протестируйте на стандартных штрихкодах
4. Обратитесь к документации CipherLab RK26
